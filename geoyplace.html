<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, width=device-width" />
<link rel="stylesheet" type="text/css" href="https://js.api.here.com/v3/3.0/mapsjs-ui.css?dp-version=1533195059" />
<script type="text/javascript" src="https://js.api.here.com/v3/3.0/mapsjs-core.js"></script>
<script type="text/javascript" src="https://js.api.here.com/v3/3.0/mapsjs-service.js"></script>
<script type="text/javascript" src="https://js.api.here.com/v3/3.0/mapsjs-ui.js"></script>
<script type="text/javascript" src="https://js.api.here.com/v3/3.0/mapsjs-mapevents.js"></script>

</head>
<body>
  <div id="map" style="width: 100%; height: 400px; background: grey" />
  <script  type="text/javascript" charset="UTF-8" >
    
/**
 * Moves the map to display over Berlin
 *
 * @param  {H.Map} map      A HERE Map instance within the application
 * 
 */
 let infoWindow;
         let resultados;
         var pos;
   

    if (navigator.geolocation) {

navigator.geolocation.getCurrentPosition(function(position) {
    console.log(position)
   pos = {
    lat: position.coords.latitude,
    lng: position.coords.longitude
  };
  // acceso a imagenes pero no encontre ninguna 
//  fetch(`https://places.demo.api.here.com//places/v1/places/15266jcb-6bd4461dcdbe412c9a17063a2a424200/media/images?&app_id=DemoAppId01082013GAL&app_code=AJKnXv84fjrb0KIHawS0Tg`).then(res => res.json()).then(result => console.log(result));
//   fetch(`https://places.demo.api.here.com/places/v1/discover/around?at=${pos.lat}%2C${pos.lng}&cat=sights-museums&app_id=DemoAppId01082013GAL&app_code=AJKnXv84fjrb0KIHawS0Tg`).then(res => res.json()).then(result => filtrarRestaurant(result));
  fetch(`https://places.demo.api.here.com/places/v1/discover/explore?at=${pos.lat}%2C${pos.lng}&cat=restaurant&app_id=DemoAppId01082013GAL&app_code=AJKnXv84fjrb0KIHawS0Tg`).then(res => res.json()).then(result =>filtrarRestaurant(result))
//   fetch(`https://places.demo.api.here.com/places/v1/discover/explore?in=${pos.lat}%2C80%2C${pos.lng}%2C80&app_id=devportal-demo-20180625&app_code=9v2BkviRwi9Ot26kp2IysQ`).then(res => res.json()).then(result => console.log(result));
})



}
// let imagenes = new Array()
function filtrarRestaurant(food){
console.log(food)

// fetch(`https://places.demo.api.here.com/places/v1/places/152jx7ps-df310e72f15c0f63b3a306061d757d65/media/images?app_id=DemoAppId01082013GAL&app_code=AJKnXv84fjrb0KIHawS0Tg`).then(res => res.json()).then(result => console.log(result)).catch(err => console.log(err))
 let  imagenes = food.results.items.forEach(e => {
    // let link = e.category.href;
    // fetch(link).then(res => res.json()).then(result =>console.log(result));
    let fo = e.href;
  return fetch(fo).then(res => res.json()).then(result => je(result))
});



}

function je(imagenes) {
    console.log(imagenes)
}






/**
 * Boilerplate map initialization code starts below:
 */

//Step 1: initialize communication with the platform

  </script>
</body>
</html>